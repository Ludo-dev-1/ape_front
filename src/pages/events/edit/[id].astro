---
import Layout from "../../../layouts/Layout.astro";
import Header from "../../../layouts/Header.astro";
import Footer from "../../../layouts/Footer.astro";
import EditEventForm from "../../../components/EditEventForm.tsx";

// ðŸ‘‡ Ne pas prÃ©-rendre cette page, elle est dynamique
export const prerender = false;

const { id } = Astro.params;

if (typeof id !== "string") {
    throw new Error("L'identifiant de l'article est manquant ou invalide.");
}

const response = await fetch(`http://localhost:5000/event/${id}`);
const event = await response.json();
---

<Layout>
    <Header />

    <section class="bg-white py-12">
        <div class="container mx-auto px-4 max-w-3xl">
            <h1 class="text-2xl font-bold mb-6">Modifier l'Ã©vÃ©nement</h1>
            <EditEventForm
                client:only="react"
                eventId={event.id}
                initialTitre={event.titre}
                initialDescription={event.description}
                initialImage={event.image}
                initialDateEvent={event.dateEvent}
            />
        </div>
    </section>

    <Footer />
</Layout>
